<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
<!--<link rel="stylesheet" href="estilos.css">-->
</head>
<body>
  <main>
      <h1>Imagen del d√≠a de la AEMET</h1>
      <button id="cargar">Cargar mapa</button>
  </main>
<script>
    let api_key= "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqYXZpZXJwZWlyb2FndWFkb0BnbWFpbC5jb20iLCJqdGkiOiIxY2Y1OGRkOC03MzQ2LTQzMmUtYTBlOC1kMzM2NGIxZDliM2MiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTczNDU0NzQ3MywidXNlcklkIjoiMWNmNThkZDgtNzM0Ni00MzJlLWEwZTgtZDMzNjRiMWQ5YjNjIiwicm9sZSI6IiJ9.IXbWfocEB7BPB15-Zs6EYqozB-e9xLlbv63-6rvjOfo";
    let boton=document.getElementById("cargar");
    boton.addEventListener("click", crearMapa)

    async function crearMapa(){
        try{
        resultat=await fetch("https://opendata.aemet.es/opendata/api/mapasygraficos/analisis?api_key="+api_key)    
          valorjson= await resultat.json();
          let img = document.createElement("img");
          img.src = valorjson.datos;
          document.body.appendChild(img);
        }catch(err){
          document.write(err);
        }  
    }
</script>
</body>
</html>