<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <main>
    </main>
    <div id="error"></div>
    <p id="nif"></p>
    <ul>
    </ul>
</body>
<script>

    ///////////////////////////////////
        /* fetch("https://api.generadordni.es/v2/doi/nif?results=10&countrycode=es ")
        .then(response => {
            console.log(response.status);
        })
        .catch(error => {
            console.log("Error:  " + error);
        }); 
    
    ///////////////////////////////////
    */
    /*let datos = document.querySelector("main");
    let capaError = document.getElementById("error");
    fetch(" https://api.fbi.gov/wanted/v1/list")
        .then(respuesta => respuesta.text())
        .then(texto => {
            datos.innerHTML = texto;
        })
        .catch(error => { capaError.innerText = error }); */
    ///////////////////////////////////

        /*var capaNIF = document.getElementById("nif");
        fetch("https://api.generadordni.es/v2/profiles/person")
            .then(response => {
                if (response.ok) {
                    return response.json();
                }
                else {
                    throw new Error("Los datos no llegaron bien");
                }
            })
            .then(listaNIFs => {
                capaNIF.textContent = listaNIFs[0]["nif"];
            })
            .catch(error => {
                capaNIF.textContent = error;
            }); */
    ///////////////////////////////////

    var main = document.querySelector("main");
    fetch("https://picsum.photos/700/400?random ")
        .then(response => {
            if (response.ok) {
                return response.blob();
            }
            else {
                throw new Error("Los datos no llegaron bien");
            }
        })
        .then(blob => {
            console.log(blob.type);
            let imagen = document.createElement("img"); //nuevo elemento img  
            //Asignamos al atributo src del elemento creado, la URL virtual de la imagen descargada 
            imagen.setAttribute("src", URL.createObjectURL(blob));
            main.innerHTML = "";//borramos mensaje de "Esperando" 
            main.appendChild(imagen); //colocamos la imagen en la capa main 
        })
        .catch(error => {
            main.textContent = error;
        }); 
    ///////////////////////////////////

    /*     let lista = document.querySelector("ul");
        fetch("https://api.generadordni.es/v2/profiles/person" + "?results=2&gender=female", {
            method: "get",
            mode: "cors"
        })
            .then((resultado) => resultado.json())
            .then(perfiles => {
                for (let perfil of perfiles) {
                    let li = document.createElement("li");
                    li.textContent = perfil.name + " " + perfil.nie;
                    lista.appendChild(li);
                }
            })
            .catch((error) => {
                document.querySelector("main").textContent = "Error: " + error;
            });  */

    ///////////////////////////////////
    /*     let p = document.querySelector("p");
        let form = new FormData();
        form.append("nif", "12345678A");
        form.append("name", "Andrea");
        fetch("https://noexiste/validarNIF.php", {
            method: "post",
            body: form
        })
            .then((resultado) => resultado.json())
            .then(datos => {
                p.textContent = datos.error.mensaje;
            })
            .catch((error) => {
                document.querySelector("main").textContent = "Error: " + error;
            });
     */
    ///////////////////////////////////

    /*  let data = {
         title: "Mi mensaje",
         body: "Mensaje de prueba",
         userId: 5
     }
     fetch('https://jsonplaceholder.typicode.com/posts', {
         method: 'POST',
         body: JSON.stringify(data),
         headers: {
             "Content-Type": "application/json; charset=UTF-8"
         }
     })
         .then(resp => resp.json())
         .then(json => { console.log(json) })
         .catch(err => { console.log(err) }); */


 /*    let data = {
        title: "Mi mensaje",
        body: "Mensaje de prueba",
        userId: 5
    }
    async function peticion() {
        try {
            const resp = await
                fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    body: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json; charset=UTF-8"
                    }
                });
            const json = await resp.json();
            console.log(json);
        }
        catch (err) {
            console.log(err);
        }
    }
    peticion(); */
</script>

</html>